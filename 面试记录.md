

[TOC]

# 3.19  腾讯文档一面

**线程和进程的区别** 

**结合jvm和操作系统介绍区别** 

操作系统：进程是资源分配的基本单位，线程是任务执行的基本单位

同一进程的线程共享内存空间

进程切换资源消耗大，进程上下文切换涉及保存和恢复整个虚拟地址空间，成本高，线程切换因为共享地址空间，仅需保存线程私有的栈和寄存器状态

线程运行于进程之上，线程更加轻量

jvm : 进程拥有独立的方法区和堆，多个线程共享进程的方法区和堆区，拥有独自的栈区

**进程为什么很重？** 

上下文切换开销大，保存和恢复维护的状态信息多

进程通信麻烦，每个进程有独立的内存空间，只能通过复杂的通信方式

**为什么进程有多个线程**	

进程切换开销大

并行运行多个线程，提高CPU利用率

**结合jvm实现和操作系统调度为什么会出现线程安全问题** 

操作系统采用抢占式调度，线程挂起时机不可预测，可能导致操作中断

每个线程拥有独立的栈区，对共享变量的操作会先修改本地缓存，而非直接写入主内存，线程内部修改其它线程不可见，若未及时刷新到主内存，其它线程可能读取到旧值指令

jvm和cpu为提升性能，对指令重排导致有序性混乱

**jvm内存分区**

栈区（方法参数，局部变量），堆区（对象实列和数组），方法区（类信息，静态变量，运行时常量池），程序计数器，本地方法区

**如何保证访问堆区资源不会出现线程安全问题**

保证线程安全三大特性

**线程安全三大特性：原子性可见性有序性** 

可见性是指一个线程对共享变量的修改，另外一个线程能够立刻看到；

原子性是指操作是不可分的。其表现在于对于共享变量的某些操作，应该是不可分的，必须连续完成。

有序性，禁止jvm和cpu对指令重排

**jvm垃圾回收算法** 

**在垃圾回收时需要将所有线程阻塞吗 对已经回收或正在回收的资源访问，内存地址偏移** 

**协程和线程有什么区别** 

**耗时任务分类：IO型，CPU型** 

**协程和线程更适合处理哪种类型的耗时任务**

**协程运行空间 协程上下文** 

**一个线程上创建多个协程上下文会有冲突吗，多个协程能完成协程调度吗，如何实现这些协程统一调度**  

**kotlin协程实现原理** 

**锁的分类，和实现原理** 

**CAS 比较交换算法有什么问题 ** ABA问题，自旋问题，只能保证单一变量原子性问题，公平性问题

**悲观锁和乐观锁 命中锁（正在执行锁的资源的阻塞）都会导致CPU飙升吗** 

**项目使用过程中对哪些Android机制了解比较多** 

**简单介绍一下handler机制** handler，messagequeue，looper，message关系

**为什么将资源加载在子线程中执行，为什么在主线程更新UI**

**为什么不允许子线程修改UI呢** 

**子线程可以创建自己的handler吗** 可以创建，但必须初始化自己的Looper

**子线程创建Looper对象会有什么副作用，会有生命周期的问题吗？Looper对象生命周期和子线程相同**

loop循环会持续运行，占用cpu资源

外部对象生命周期结束时messagequeue中有未处理的消息，导致内存泄漏

**binder你主要用来是干嘛的，是自己实现一个binder吗**

**四大组件常用通信方式**

**项目中为什么会有跨进程通信的场景**

# **~~3.21腾讯音乐一面~~**

**展示项目，查看绘制层级** 

**Glide减少内存占用，启动优化，懒加载优化** 

**Glide你是如何减少内存占用的，统计优化之后内存减少多少吗** ,大约减少30%内存空间

首先想到的是内存缓存机制，Glide可能用了LruCache来管理内存中的图片资源，这样可以避免重复加载相同的图片，减少内存占用。

然后是Bitmap的复用，比如使用BitmapPool，这样可以复用已经存在的Bitmap对象，减少内存分配和垃圾回收的开销。这一点很重要，因为频繁创建和销毁Bitmap会导致内存抖动，影响应用性能。

Glide可能会根据ImageView的尺寸来调整图片的分辨率，避免加载过大的图片到内存中。

Glide可能在生命周期管理方面也做了优化，比如在Activity或Fragment销毁时自动释放资源，避免内存泄漏。同时，可能还支持在低内存情况下自动清理缓存，帮助系统回收内存

**开发Android项目多久了** 

**未来往Android移动端发展吗**

**聊一下Android基础知识**

**说说你对handler消息机制理解，怎么实现跨线程去处理消息的呢，有深入了解过这块的源码吗** 

**为什么会选择这个基础框架呢**

Redux的核心是单一数据源、状态不可变和纯函数更新，而RxJava则擅长处理异步数据流和复杂的线程调度。将两者结合，应该能提供更清晰的状态管理和更高效的异步处理

首先是单向数据流，让状态变化可预测；RxJava的操作符简化异步任务，处理线程切换；单一数据源便于管理

**项目展示过度绘制红色区域较多**

**怎么发现sharedpreference内存占用较大，怎么想到这个解决方案，后续使用mmkv去代替使用** 

可能是在性能分析过程中发现内存中有大量的SharedPreferences实例（内存占用较大，造成OOM）或者主线程被阻塞（ANR），从而寻找替代方案。这时候，MMKV作为一个更高效的键值存储库，自然会成为候选，因为它通过mmap内存映射技术，避免了IO操作，读写更快，并且支持多进程

SharedPreferences 数据同时存在于内存（缓存）和磁盘（持久化文件），一个 SharedPreferences 实例严格对应一个 XML 文件，通过名称唯一标识，在加载时会将整个xml文件读入内存，如果数据量大或者频繁读写，可能会导致内存占用过高或者ANR问题

sharedpreference 区别 apply ：异步，推荐

​					commit : 同步

mmkv同一个文件返回同一个实例对象，通过引用计数管理自动释放，系统调用 `mmap()` 将文件映射到虚拟内存，读写操作直接操作内存，使用二进制格式，内存占用更少，写入时使用CAS自旋锁保证线程安全，读取时允许并发读取（会在写入前短暂阻塞）

**优化完之后有做一些内存方面的数据统计吗** 初始内存占用降低80% - 95%，高频读写时 sharedpreference频繁GC，内存频繁波动，mmkv内存占用比较稳定

**为什么会需要使用mmkv存储数据，存储哪些数据** 

项目中主要使用mmkv 存储 学生的学号，密码和成绩 存储到本地

**idlehandler中执行了哪些任务，怎么提升的启动速率** 

idlehandler延迟初始化（监听器注册）预加载资源 

使用idlehandler预加载课表和成绩 ，存储到本地，每隔一天重新加载一次，结合idlehandler延迟处理任务**启动速率优化多少呢**？课表网络请求数据450ms - 520ms，数据库请求20ms，成绩网络请求930 - 1000ms ， 数据库请求 40ms左右

**为什么从c++转到java来写Android移动端呢** 

**长理星球这个项目你具体负责了哪些模块**  

**http预热在发送请求的时候是发的什么请求呢 head头请求** 

因为HEAD不会修改服务器资源，多次发送不会有副作用，仅返回响应头无响应体，适合用于预热这种只需建立连接而不需处理数据的场景

使用GET的话，虽然也能达到预热的效果，但会下载响应体，增加不必要的流量消耗

**http请求类型** Get： 请求资源，Head :  仅返回响应头，检查资源是否存在，Post：发送资源给服务器 ，Put : 更新资源 ，Patch：更新部分资源 ，Delete：删除资源 ，Options : 获取服务器支持的请求类型 ，Trace

by lazy **为什么使用懒加载**view ： 缩短加载时间，避免不必要的内存占用

**懒加载根布局问题** : 懒加载根布局可能会延迟视图的创建，导致首次渲染时间增加，用户可能会感觉到白屏时间更长

生命周期的一致性也是一个问题，如果根布局在`onCreate`之后才初始化，可能会影响后续的生命周期回调，比如`onStart`或`onResume`中访问视图时可能为空，导致空指针异常

**如何处理内存泄漏** leakcanary工具观察 常见的内存泄漏

**添加到lifecycle中的监听器是如何自动管理生命周期的呢？** Activity和Fragment都实现了lifecycleowner接口，getlifecycle（）方法来获取lifecycle对象，我们要观察生命周期状态的话，可以通过LifecycleObserver来添加观察者，Lifecycle内部维护了一个观察者列表，当生命周期变化的时候，会通知这些观察者。而当LifecycleOwner（比如Activity）被销毁时，Lifecycle会负责清除这些观察者，避免持有引用导致内存泄漏

**腾讯云HTTPDNS为什么能加快解析** 

绕过传统dns层级，直连权威服务器

动态选择最短物理距离服务器，实现解析速度提升3-5倍

**优化布局结构和减少过度绘制如何** 

布局优化主要是减少层次和复杂度，比如使用ConstraintLayout替代多层嵌套的LinearLayout或RelativeLayout

ViewStub来延迟加载不常用的布局，减少初始化的时间

自定义View时，避免在onDraw方法中创建对象，或者进行耗时操作 （ui操作都是在主线程进行的，ondraw中执行耗时操作会导致主线程阻塞）

**优化方案是你提出，设计，推动后台设计的吗** 

## **优化方案 : 发现问题， 提出问题 ，解决问题，三大步是如何实现的** 

## **项目中你负责的内容没法跟简历上的优化对应上，这些优化主要对应在哪些界面上** 

## **这些优化的实际提升速率，具体是哪里得到了提升** 

## **闪屏界面等待，后续如何优化资源请求** 

**说一下binder通信机制，如果需要传输大数据怎么办** 

继续使用binder通信分片传输或是匿名共享内存存储大数据，binder仅传递文件描述，contentprovider ，文件共享实现

客户端服务端模型 服务端通过servicemanage注册binder服务，binder驱动持有引用，客户端通过servicemanage获取binder引用通过binder驱动转换为代理对象，客户端执行相应方法通过binder驱动找到相应实体，唤醒binder线程池处理请求，并返回数据到客户端

mmap 实现 进程用户空间和内核空间映射到同一块物理地址，

**view绘制流程，为什么view不能在子线程中更新，Android中是怎么限制的** viewrootimpl

通过viewrootImpl线程检查是否为主线程，如果不是，就会抛出异常

**插桩，热修复 （垃圾回收，gc）**

**怎么理解协程的挂起**

**知道java中内联吗，编译期间会做内联优化**

# ~~3.24 腾讯文档二面~~ 

**可以产生1 - 5 的随机数，如何生成1 - 7 的随机数**

**Glide ，mmkv内存优化如何做的，怎么想到要使用这个库的，具体的优化效果是多少**

**内存泄漏的原因，具体场景**

单例类引用其它类，静态变量引用其它类，类中创建非静态内部类，handler导致内存泄漏，线程导致内存泄漏，资源未关闭导致内存泄漏

**预加载什么内容，HTTP 预热** 

**如何加快网络请求，提升较大？**

DNS解析优化，tcp连接复用 ，使用缓存避免重复加载 ，压缩请求和资源大小 

**协程异常如何处理**

coroutineExceptionhandler , supervisorjob ,  try / catch

**新搭建一个模块需要与现有app中一个模块频繁交互，如何处理**

接口暴露 + 依赖注入，事件总线高度解耦（eventbus），路由框架

**现有客户端和服务端通信的项目，传输数据时错误，如何排查问题？客户端和服务端代码实现都没问题，传输数据时就是错误，该如何排查**

请求方法服务端否存在，资源是否存在，抓包处理，并发问题，序列化和反序列化问题，DNS解析问题，数据压缩问题

**你的同事不同意你的想法，如何达成统一**

**有了解过flutter 这些吗** 

# 3.26 腾讯云一面

客户端基础框架如何搭建

为什么不使用最新geogle框架mvvm 结合livedata

glide三级缓存，当与glide绑定的页面销毁glide如何处理呢？当页面销毁时，Glide应该会自动停止加载请求并释放相关资源，防止内存泄漏

协程流 flow有了解吗，协程挂起了解吗，协程要如何取消呢

协程执行一个耗时操作，界面退出如何做到自动取消

view事件分发流程，如何对事件拦截呢

**对属性动画了解吗 帧动画，view动画，属性动画**

对发出去的网络请求都要添加一个请求头怎么处理，应该添加一个什么样的拦截器呢，在哪个阶段？因为它有应用拦截器，网络拦截器什么的嘛有好几种拦截器

了解c++吗

binder通信了解到哪个阶段呢，我们日常开发有哪些是基于binder通信来实现的，启动一个activity是吗

知道如何去启动一个activity吗， startactivity底层做了哪些有了解吗

操作系统有一个独立进程空间，了解这个概念吗

A进程和B进程通信有哪些方式，共享内存展开说一下

你有什么技术比较擅长的 ?

java层说一下handler机制原理，handler可以用来切换线程， 在messagequeue中如何保证线程安全的呢

将文件下的文件通过计算显示的列表上，如何处理呢

# 3.27 好视通

线程间的通信方式

基础框架如何实现，为什么没有使用mvvm结合livedata使用

事件分发机制

死锁原因，如何解决

room搭配mmkv数据如何分类保存的呢，mmkv对比sharedpreference有哪些优化呢

页面置换算法

项目中遇到最难的问题，目前还没解决的问题

知道ANR吗，在每个组件中的时间具体是多少呢

# ~~3.28 懂车帝一面~~

hashmap了解吗

使用Glide来避免OOM，知道OOM是什么东西吗，什么情况下会发生OOM，什么东西存储在堆内存中

activity正常的生命周期，activityA启动activityB生命如何变化

类加载器的作用与原理，在应用层有什么作用吗？模块化加载， 热部署和热修复

序列化和反序列化什么意思，了解吗

view事件分发机制，framelayout中有连个button，重叠了，点击重叠区域哪个button会消费事件

handler机制，handler一般什么场景下会用到，可以从主线程发送消息给子线程处理吗

view的post和handler的post有什么区别

view的绘制流程，measurespec有什么作用，由什么组成

使用rxjava的好处是啥呀

# 3.31 美团一面

redux架构有哪些优点呢？在使用中，我们需要实现哪些部分才能实现单向数据流这样的特点？两个一模一样的界面他们的state是同一个吗？

Glide框架主要用到了什么特点呢？

项目使用java和kotlin写的吧，会涉及到kotlin和java的互调吗，不是使用互调，如何解决这部分用java写，另一部分是使用kotlin写的呢

http预热是什么？复用tcp连接，是在那一层复用的？

HTTPDNS，

http会被劫持，https会被劫持吗

有了解过java泛型吗，泛型加载是在编译期还是在运行期？

强引用，弱引用，虚引用，软引用了解吗

内存泄漏的场景？匿名内部类不一定导致外部类对象无法被回收 

简要说明binder机制

AI工具聊天

# 4.1 腾讯云智一面

为什么选择Glide框架而不是Picssao或是其它的框架，如何减少内存占用以及如何减少内存泄漏（功能全面，三级缓存，防止内存泄漏）

如何避免内存泄漏呢 

怎么懒加载view视图呢

idlehandler是在什么时候执行呢 ，低优先级的时候去处理任务

闪屏使用预加载?

如何减少布局嵌套？merge用过吗

解释一下什么叫面向对象编程，知道封装，继承，多态（同一个接口有不同实现），抽象吗

什么是java虚拟机？

如何实现多线程呢

垃圾回收机制

http与https区别是什么

# 4.3 美团二面

网络部分如何交互？客户端和后端，提供接口，遇到问题如何解决的呢

协程在项目中如何使用的呢

在学习Android中有哪些计算机基础知识需要学习呢

哪些涉及到操作系统的知识呢

AI大模型
